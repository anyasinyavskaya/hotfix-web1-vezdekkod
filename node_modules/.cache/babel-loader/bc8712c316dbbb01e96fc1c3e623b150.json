{"ast":null,"code":"var _jsxFileName = \"/home/anna/\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438/hotfix.web/src/panels/Basket.js\";\nimport React, { useMemo, useState } from 'react';\nimport { withRouter, Link } from 'react-router-dom';\nimport accounting from 'accounting';\nimport Checkbox from './Checkbox';\nimport edit from \"../img/edit.svg\";\nimport './place.css';\n\nconst ConditionalLink = ({\n  children,\n  to,\n  condition,\n  className,\n  classNameDisabled\n}) => !!condition && to ? /*#__PURE__*/React.createElement(Link, {\n  to: to,\n  className: className,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 7\n  }\n}, children) : /*#__PURE__*/React.createElement(\"div\", {\n  className: classNameDisabled,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 7\n  }\n}, children);\n\nconst Basket = ({\n  match: {\n    params: {\n      areaId,\n      itemId\n    }\n  },\n  foodAreas,\n  order\n}) => {\n  const [faster, setFaster] = useState(true);\n  const [time, setTime] = useState('');\n  const [selfService, setSelfService] = useState(false);\n  const area = foodAreas.filter(area => area.id === areaId)[0];\n  const item = area.items.filter(item => item.id === itemId)[0];\n  const [price, products] = useMemo(() => {\n    const foodIds = new Set((item.foods || []).map(item => item.id));\n    const products = Object.values(order).filter(value => {\n      const {\n        item: {\n          id\n        }\n      } = value;\n      return foodIds.has(id);\n    });\n    const result = products.reduce((result, value) => {\n      const {\n        count,\n        item\n      } = value;\n      return result + parseInt(item.price) * parseInt(count);\n    }, 0);\n    return [accounting.formatNumber(result, 0, ' '), products];\n  }, [order, item]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Place\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"Place__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"Place__trz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"Place__head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"Place__logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 25\n    }\n  }, area.name)), /*#__PURE__*/React.createElement(Link, {\n    to: \"/edit\",\n    className: \"Place__change-tz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"change-profile\",\n    src: edit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"Place__restoraunt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"Place__restoraunt-logo\",\n    alt: \"Fastfood logo\",\n    src: item.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"Place__restoraunt-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"Place__restoraunt-type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, item.description)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Place__products-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"Place__products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, products.map(({\n    item,\n    count\n  }) => /*#__PURE__*/React.createElement(\"li\", {\n    className: \"Place__product\",\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"Place__product-logo\",\n    alt: \"Ordered product logo\",\n    src: item.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"Place__product-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"Place__product-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, \"\\u0426\\u0435\\u043D\\u0430: \", item.price), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"Place__product-count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }, \"x\", count)))), /*#__PURE__*/React.createElement(Link, {\n    className: \"Place__change-product\",\n    to: `/place/${areaId}/${itemId}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Place__choice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"\\u0412\\u0440\\u0435\\u043C\\u044F:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Place__choice-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, \"\\u041A\\u0430\\u043A \\u043C\\u043E\\u0436\\u043D\\u043E \\u0431\\u044B\\u0441\\u0442\\u0440\\u0435\\u0435\"), /*#__PURE__*/React.createElement(Checkbox, {\n    checked: faster,\n    onToggle: () => {\n      if (faster) {\n        setFaster(false);\n      } else {\n        setTime('');\n        setFaster(true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Place__choice-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, \"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"time\",\n    value: time,\n    onFocus: () => {\n      setFaster(false);\n    },\n    onChange: event => {\n      setFaster(false);\n      setTime(event.target.value);\n    },\n    onBlur: () => {\n      if (time) {\n        setFaster(false);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Place__choice-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, \"\\u0421 \\u0441\\u043E\\u0431\\u043E\\u0439\"), /*#__PURE__*/React.createElement(Checkbox, {\n    checked: selfService,\n    onToggle: () => setSelfService(!selfService),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Place__choice-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, \"\\u041D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0435\"), /*#__PURE__*/React.createElement(Checkbox, {\n    checked: !selfService,\n    onToggle: () => setSelfService(!setSelfService),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"footer\", {\n    className: \"Place__footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ConditionalLink, {\n    to: `/order/${area.id}/${item.id}`,\n    condition: price > 0,\n    className: \"Place__order\",\n    classNameDisabled: \"Place__order-disabled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \", price)));\n};\n\nexport default withRouter(Basket);","map":{"version":3,"sources":["/home/anna/Загрузки/hotfix.web/src/panels/Basket.js"],"names":["React","useMemo","useState","withRouter","Link","accounting","Checkbox","ConditionalLink","children","to","condition","className","classNameDisabled","Basket","match","params","areaId","itemId","foodAreas","order","faster","setFaster","time","setTime","selfService","setSelfService","area","filter","id","item","items","price","products","foodIds","Set","foods","map","Object","values","value","has","result","reduce","count","parseInt","formatNumber","name","edit","image","description","event","target"],"mappings":"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","sourcesContent":["import React, {useMemo, useState} from 'react';\nimport {withRouter, Link} from 'react-router-dom';\nimport accounting from 'accounting';\n\nimport Checkbox from './Checkbox';\n\nimport edit from '../img/edit.svg';\nimport './place.css';\n\n\nconst ConditionalLink = ({children, to, condition, className, classNameDisabled}) => (!!condition && to)\n    ? <Link to={to} className={className}>{children}</Link>\n    : <div className={classNameDisabled}>{children}</div>;\nconst Basket = ({match: {params: {areaId, itemId}}, foodAreas, order}) => {\n\n    const [faster, setFaster] = useState(true);\n    const [time, setTime] = useState('');\n    const [selfService, setSelfService] = useState(false);\n    const area = foodAreas.filter(area => area.id === areaId)[0];\n    const item = area.items.filter(item => item.id === itemId)[0];\n\n    const [price, products] = useMemo(() => {\n        const foodIds = new Set((item.foods || []).map(item => item.id));\n\n        const products = Object.values(order)\n            .filter((value) => {\n                const {item: {id}} = value;\n\n                return foodIds.has(id);\n            });\n\n        const result = products.reduce((result, value) => {\n            const {count, item} = value;\n\n            return result + parseInt(item.price) * parseInt(count);\n        }, 0);\n\n        return [accounting.formatNumber(result, 0, ' '), products];\n    }, [order, item]);\n\n    return (\n        <div className=\"Place\">\n            <header className=\"Place__header\">\n                <aside className=\"Place__trz\">\n                    <h1 className=\"Place__head\">\n                        <Link to=\"/\" className=\"Place__logo\">\n                            {area.name}\n                        </Link>\n                    </h1>\n                    <Link to=\"/edit\" className=\"Place__change-tz\">\n                        <img\n                            alt=\"change-profile\"\n                            src={edit}\n                        />\n                    </Link>\n                </aside>\n            </header>\n            <aside className=\"Place__restoraunt\">\n                <img\n                    className=\"Place__restoraunt-logo\"\n                    alt=\"Fastfood logo\"\n                    src={item.image}\n                />\n                <h2\n                    className=\"Place__restoraunt-name\"\n                >\n                    {item.name}\n                </h2>\n                <p className=\"Place__restoraunt-type\">\n                    {item.description}\n                </p>\n            </aside>\n            <div className=\"Place__products-wrapper\">\n                <ul className=\"Place__products\">\n                    {products.map(({item, count}) => (\n                        <li\n                            className=\"Place__product\"\n                            key={item.id}\n                        >\n                            <img\n                                className=\"Place__product-logo\"\n                                alt=\"Ordered product logo\"\n                                src={item.image}\n                            />\n                            <h3\n                                className=\"Place__product-name\"\n                            >\n                                {item.name}\n                            </h3>\n                            <p className=\"Place__product-price\">\n                                Цена: {item.price}\n                            </p>\n                            <p className=\"Place__product-count\">\n                                x{count}\n                            </p>\n                        </li>\n                    ))}\n                </ul>\n                <Link\n                    className=\"Place__change-product\"\n                    to={`/place/${areaId}/${itemId}`}\n                >\n                    Изменить\n                </Link>\n            </div>\n            <div className=\"Place__choice\">\n                <h3>Время:</h3>\n                <div className=\"Place__choice-item\">\n                    <span>Как можно быстрее</span>\n                    <Checkbox\n                        checked={faster}\n                        onToggle={() => {\n                            if (faster) {\n                                setFaster(false);\n                            } else {\n                                setTime('');\n                                setFaster(true);\n                            }\n                        }}\n                    />\n                </div>\n                <div className=\"Place__choice-item\">\n                    <span>Назначить</span>\n                    <input\n                        type=\"time\"\n                        value={time}\n                        onFocus={() => {\n                            setFaster(false);\n                        }}\n                        onChange={event => {\n                            setFaster(false);\n                            setTime(event.target.value);\n                        }}\n                        onBlur={() => {\n                            if (time) {\n                                setFaster(false);\n                            }\n                        }}\n                    />\n                </div>\n                <div className=\"Place__choice-item\">\n                    <h3>С собой</h3>\n                    <Checkbox checked={selfService} onToggle={() => setSelfService(!selfService)}/>\n                </div>\n                <div className=\"Place__choice-item\">\n                    <h3>На месте</h3>\n                    <Checkbox checked={!selfService} onToggle={() => setSelfService(!setSelfService)}/>\n                </div>\n            </div>\n            <footer className=\"Place__footer\">\n                <ConditionalLink to={`/order/${area.id}/${item.id}`} condition={price > 0} className=\"Place__order\"\n                                 classNameDisabled=\"Place__order-disabled\">\n                    Оплатить {price}\n                </ConditionalLink>\n            </footer>\n        </div>\n    );\n};\n\nexport default withRouter(Basket);\n"]},"metadata":{},"sourceType":"module"}